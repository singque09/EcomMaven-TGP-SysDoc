[%load_template file:'printdocs/includes/styles.template.html'/%]
<style>
  .nPrintDoc>.pagebreak:first-child {
    page-break-after: auto;
  }

  .nPrintDoc>.pagebreak:last-child {
    page-break-before: auto;
  }

  hr.pagebreak {
    border-top: none;
  }

  .container {
    position: relative;
    padding: 0 2.21mm !important;
    height: 137mm;
    width: 100%;
  }

  .container>.notes {
    position: absolute;
    bottom: 10.318mm;
    right: 4.762mm;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 1px dashed black;
    border-radius: 5mm;
    width: 101.6mm;
    height: 41.275mm;
  }

  .grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 2.38mm;
    height: 152.4mm;
    width: 100%;
    padding: 0 2.21mm;
  }

  .grid-container>div {
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px dashed black;
    border-radius: 6mm;
  }

  .rotate-holder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 570px !important;
  }

  .rotate {
    -webkit-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    transform: rotate(270deg);
    text-align: center;
  }

  .rotate h2 {
    margin-top: 0;

    line-height: 1.2;
  }
</style>
[%show_orderlist ids:'[@ids@]' sortby:'[@tmpl_sort_by@]' groupby:'[@tmpl_group_by@]' sortorder:'[@tmpl_sort_order@]'%]
[%param *footer%]
[%set [@has_normal_product@] %][%/set%]
[%show_order id:'[@order_ID@]' customer:'[@username@]' dropshipper:'[@showdropshipper@]'%]
[%param *body%]

<!-- Product type variable start -->
[%set [@this_product_type@] %]
[%product sku:'[@SKU@]'%]
[%param *body%]
[%if [@product_type@] eq 'hamper' %]
hamper
[%else%]
normal
[%/if%]
[%/param%]
[%/product%]
[%/set%]
<!-- Product type variable end -->

[%if [@this_product_type@] like 'hamper' %]
<div class="nPrintDoc pagebreak">
  <div class="container">
    [%show_order id:'[@order_id@]' hidechild:'1'%]
    [%param header%]
    [%set [@^extra_sales_channel@] %][%escape%][@sales_channel@][%/escape%][%/set%]
    [%/param%]
    [%/show_order%]
    <h1>#[%escape%][@order_id@][%/escape%] ([@extra_sales_channel@])</h1>
    <table class="table table-bordered table-condensed">
      <tr>
        <th>Qty</th>
        <th>Hamper</th>
        <th>Location Code</th>
      </tr>
      <tr>
        <td>[@quantity@]</td>
        <td>
          <p>[%escape%][@model@][%/escape%]</p>
        </td>
        <td>[%escape%][@pick_zone@][%/escape%]</td>
      </tr>
    </table>
    <div>
      <div class=" order_id">
        <div class="col-xs">
          <div>
            <p><b>Shipping Name:</b> [%escape%][@ship_company@][%/escape%]</p>
            <p><b>Shipping Address:</b> [%escape%][@ship_street1@] [@ship_street2@][%/escape%],
              [%escape%][@ship_city@][%/escape%]</p>
            <p><b>Shipping Post Code, State:</b> [%escape%][@ship_state@] [@ship_zip@],
              [@ship_country@][%/escape%]
            </p>
            <p><b>Shipping Method:</b> [%escape%][@shipping_method@][%/escape%]</p>
            <p><b>Internal Order Notes:</b> [%escape%][@internal_notes@][%/escape%]</p>
          </div>
        </div>
      </div>
    </div>
    <div class="notes">
      [@ship_comment@]
    </div>
  </div>
  <div class="grid-container">
    <div>
      [%split delimiter:'<b>Recipient Name</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Gift Message</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_recipient@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]

      [%split delimiter:'<b>Gift Message</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Sender</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_message@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]

      [%split delimiter:'<b>Sender</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Gift Card Style</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_sender@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]

      [%/split%][%split delimiter:'; Gift Message ID: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:';'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_spiff_transaction_id@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]
      <div class="rotate-holder">
        <div class="rotate">
          [%if [@label_spiff_transaction_id@] ne '' %]
          <img id="" src="/assets/gift-messages/[@order_id@]_[@label_spiff_transaction_id@]_0.jpg" alt="">
          [%else%]
          <h2 hidden>[%escape%][@extra@][%/escape%]</h2>
          <h2 class="labelRecipient" style="margin-top: 0">[@label_recipient@]</h2>
          <h2 class="labelMessage" style="margin-top: 0">[@label_message@]</h2>
          <h2 class="labelSender" style="margin-top: 0">[@label_sender@]</h2>
          [%/if%]
        </div>
      </div>
    </div>
    <div>
      [%if [@cngmt_id@] ne ''%]
      <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
        <img class="consignment-document" src="/assets/shippingdocs/A[@cngmt_id@]_0.png" />
      </a>
      [%else%]
      <span style="text-align : center;">consignment not yet generated</span>
      [%/if%]
    </div>
  </div>
</div>
[%else%]
[%set [@^has_normal_product@] %]true[%/set%]
[%/if%]
[%/param%]
[%/show_order%]

[%if [@has_normal_product@] eq 'true' %]
<div class="nPrintDoc pagebreak">
  <div class="container">
    [%show_order id:'[@order_id@]' hidechild:'1'%]
    [%param header%]
    [%set [@^extra_sales_channel@] %][%escape%][@sales_channel@][%/escape%][%/set%]
    [%/param%]
    [%/show_order%]
    <h1>#[%escape%][@order_id@][%/escape%] ([@extra_sales_channel@])</h1>
    <table class="table table-bordered table-condensed">
      <tr>
        <th>Qty</th>
        <th>Product</th>
        <th>Location Code</th>
      </tr>
      [%show_order id:'[@order_ID@]' customer:'[@username@]' dropshipper:'[@showdropshipper@]'%]
      [%param *body%]

      <!-- Product type variable start -->
      [%set [@this_product_type@] %]
      [%product sku:'[@SKU@]'%]
      [%param *body%]
      [%if [@product_type@] eq 'hamper' %]
      hamper
      [%else%]
      normal
      [%/if%]
      [%/param%]
      [%/product%]
      [%/set%]
      <!-- Product type variable end -->

      [%if [@this_product_type@] like 'normal' %]
      <tr>
        <td>[@quantity@]</td>
        <td>
          <p>[%escape%][@model@][%/escape%]</p>
        </td>
        <td>[%escape%][@pick_zone@][%/escape%]</td>
      </tr>
      [%%/if]
      [%/param%]
      [%/show_order%]
    </table>

    [%set [@is_product_set@] %]false[%/set%]

    [%show_order id:'[@order_ID@]' customer:'[@username@]' dropshipper:'[@showdropshipper@]'%]
    [%param *body%]

    <!-- Product type variable start -->
    [%set [@this_product_type@] %]
    [%product sku:'[@SKU@]'%]
    [%param *body%]
    [%if [@product_type@] eq 'hamper' %]
    hamper
    [%else%]
    normal
    [%/if%]
    [%/param%]
    [%/product%]
    [%/set%]
    <!-- Product type variable end -->

    [%if [@this_product_type@] like 'normal' and [@is_product_set@] eq 'false' %]

    <div>
      <div class=" order_id">
        <div class="col-xs">
          <div>
            <p><b>Shipping Name:</b> [%escape%][@ship_company@][%/escape%]</p>
            <p><b>Shipping Address:</b> [%escape%][@ship_street1@] [@ship_street2@][%/escape%],
              [%escape%][@ship_city@][%/escape%]</p>
            <p><b>Shipping Post Code, State:</b> [%escape%][@ship_state@] [@ship_zip@],
              [@ship_country@][%/escape%]
            </p>
            <p><b>Shipping Method:</b> [%escape%][@shipping_method@][%/escape%]</p>
            <p><b>Internal Order Notes:</b> [%escape%][@internal_notes@][%/escape%]</p>
          </div>
        </div>
      </div>
    </div>
    <div class="notes">
      [@ship_comment@]
    </div>
  </div>
  <div class="grid-container">
    <div>
      [%split delimiter:'<b>Recipient Name</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Gift Message</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_recipient@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]

      [%split delimiter:'<b>Gift Message</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Sender</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_message@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]

      [%split delimiter:'<b>Sender</b>: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:'; <b>Gift Card Style</b>'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_sender@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]

      [%/split%][%split delimiter:'; Gift Message ID: '%]
      [%param data1%][@extra@][%/param%]
      [%param *body%]
      [%if [@count@] eq 1%]
      [%split delimiter:';'%]
      [%param data1%][@data1@][%/param%]
      [%param *body%]
      [%if [@count@] eq 0%]
      [%set [@^^label_spiff_transaction_id@] %][@data1@][%/set%]
      [%if%]
      [%/param%]
      [%/split%]
      [%if%]
      [%/param%]
      [%/split%]
      <div class="rotate-holder">
        <div class="rotate">
          [%if [@label_spiff_transaction_id@] ne '' %]
          <img id="" src="/assets/gift-messages/[@order_id@]_[@label_spiff_transaction_id@]_0.jpg" alt="">
          [%else%]
          <h2 hidden>[%escape%][@extra@][%/escape%]</h2>
          <h2 class="labelRecipient" style="margin-top: 0">[@label_recipient@]</h2>
          <h2 class="labelMessage" style="margin-top: 0">[@label_message@]</h2>
          <h2 class="labelSender" style="margin-top: 0">[@label_sender@]</h2>
          [%/if%]
        </div>
      </div>
    </div>
    <div>
      [%if [@cngmt_id@] ne ''%]
      <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
        <img class="consignment-document" src="/assets/shippingdocs/A[@cngmt_id@]_0.png" />
      </a>
      [%else%]
      <span style="text-align : center;">consignment not yet generated</span>
      [%/if%]
    </div>
  </div>

  [%set [@^is_product_set@] %]true[%/set%]
  [%/if%]
  [%/param%]
  [%/show_order%]
</div>
[%/if%]

[%/param%]
[%/show_orderlist%]