<style>
  * {
    font-family: "Montserrat", sans-serif;
  }
  .box {
    width: 95%;
    height: 95%;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    page-break-after: always;
    padding-top: 5px;
  }
  .textArea {
    height: 60px;
    line-height: 20px;
    width: 99%;
    overflow: hidden;
    margin-top: 5px;
    margin-bottom: 5px;
    display: flex;
    flex-wrap: wrap;
  }
  .xs-6 {
    width: 50%;
    overflow: hidden;
    height: 18px;
  }
  .labelRecipient,
  .labelMessage,
  .labelSender {
    text-align: center;
  }
  hr {
    border-color: transparent;
  }
  .orderDetailsHolder .left, .orderDetailsHolder .right {
    font-size: 9px;
	}


	.order-details {
		height: 55px;
		overflow: hidden;
	}
</style>

[%show_orderlist ids:'[@ids@]' sortby:'[@tmpl_sort_by@]' groupby:'[@tmpl_group_by@]' sortorder:'[@tmpl_sort_order@]'%]
	[%PARAM *header%]
		
    <div class="box header" style="padding-left: 10px">
		<div class="order-details">
			
			[%show_order id:'[@order_id@]' customer:'[@username@]' hidechild:'1'%]
			[%param *header%]
			<div class="orderDetailsHolder">
				<div style="clear : both;"></div>
				<div class="left" style="width : 60%; float : left;">
				<strong>Order Id :</strong> [@order_id@]<br />
				<strong>Name :</strong> [@ship_first_name@] [@ship_last_name@]<br />
				<strong>Shipping Address :</strong> [@ship_street1@] [%if [@ship_street2@]%], [@ship_street2@][%/if%]
					[@ship_city@], [@ship_state@], [@ship_zip@],
					[@ship_country_name@]<br />
					
				</div>
				<div class="right" style="width : 40%; float : left;">
					<strong>Product Name :</strong> [%if [@total_items@] >= 2 %]multiple items[%else%][%escape%][@model@][%/escape%][%/if%]<br />
					<strong>No. of SKUs on order :</strong> [@total_items@]
				</div>
				<div style="clear : both;"></div>
			</div>
				[%if [@cngmt_id@] ne ''%]
		
		  <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
			<img
			  style="width: 100%; height: 100%"
			  src="/assets/shippingdocs/A[@cngmt_id@]_0.png"
			/>
		  </a>
		[%else%]
		<span style="text-align : center;">consignment not yet generated</span>
		
		  <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
		[%/if%]
			[%/param%]
			[%param *body%]
			[%/param%]
			[%/show_order%]
		  </div>
		  
		  
		[%if [@cngmt_id@] ne ''%]
		
		  <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
			<img
			  style="width: 100%; height: 100%"
			  src="/assets/shippingdocs/A[@cngmt_id@]_0.png"
			/>
		  </a>
		[%else%]
		<span style="text-align : center;">consignment not yet generated</span>
		
		  <a href="/assets/shippingdocs/A[@cngmt_id@]_0.png.pdf" target="_blank">
		[%/if%]
    </div>
    <hr class="pagebreak" style="display : none;" />
	
	
	[%END PARAM%] 
	[%PARAM *section_header%]
	[%END PARAM%]
	[%PARAM *body%]
		
	[%END PARAM%] 
		
[%/param%] [%/show_order%] [%END PARAM%] [%PARAM *section_footer%] [%END PARAM%]
[%PARAM *footer%] [%END PARAM%] [%END show_orderlist%]

<script type="text/javascript">
  var dataSet = document.getElementsByClassName("dataSet");

  var labelRecipient = (index) =>
    dataSet[index].getElementsByClassName("labelRecipient");
  var labelMessage = (index) =>
    dataSet[index].getElementsByClassName("labelMessage");
  var labelSender = (index) =>
    dataSet[index].getElementsByClassName("labelSender");
  var labelGiftCardStyle = (index) =>
    dataSet[index].getElementsByClassName("labelGiftCardStyle");

  var extraOptionHandler = (index) =>
    dataSet[index].getElementsByClassName("extraOptionHandler");

  var isNormalProduct = (index) =>
    dataSet[index].getElementsByClassName("normalProduct");

  var camelize = (str) =>
    str.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g, function (match, index) {
      if (+match === 0) return ""; // or if (/\s+/.test(match)) for white spaces
      return index === 0 ? match.toLowerCase() : match.toUpperCase();
    });

  window.onload = function () {
    for (let y = 0; y < dataSet.length; y++) {
      for (let x = 0; x < extraOptionHandler(y).length; x++) {
        if (dataSet[y].children[0].children.length !== 6) {
          dataSet[y].style.display = "none";
        }

        let extraoptionObjects = {};
        let extraOptionInnerText =
          extraOptionHandler(y)[x].innerText.split(";");
        for (let z = 0; z < extraOptionInnerText.length - 1; z++) {
          let extraInnerText = extraOptionInnerText[z].split(":");
          extraoptionObjects = {
            ...extraoptionObjects,
            [camelize(extraInnerText[0])]: extraInnerText[1],
          };
        }

        const { recipientName, GiftMessage, Sender, GiftCardStyle } =
          extraoptionObjects;

        labelRecipient(y)[x].innerHTML = recipientName
          ? recipientName
          : "Blank gift card";
        labelMessage(y)[x].innerHTML = GiftMessage
          ? GiftMessage
          : "Blank gift card";
        labelSender(y)[x].innerHTML = Sender ? Sender : "Blank gift card";
        labelGiftCardStyle(y)[x].innerHTML = GiftCardStyle;
        if (GiftCardStyle.match(/No Gift Card Selected.*/)) {
          for (
            let z = 0;
            z <
            extraOptionHandler(y)[
              x
            ].parentElement.parentElement.getElementsByTagName("hr").length;
            z++
          ) {
            extraOptionHandler(y)
              [x].parentElement.parentElement.getElementsByTagName("hr")
              [z].classList.remove("pagebreak");
          }
        }
      }
      for (let x = 1; x < isNormalProduct(y).length; x++) {
        for (
          let z = 0;
          z <
          isNormalProduct(y)[
            x
          ].parentElement.parentElement.getElementsByTagName("hr").length;
          z++
        ) {
          isNormalProduct(y)
            [x].parentElement.parentElement.getElementsByTagName("hr")
            [z].classList.remove("pagebreak");
        }
      }
    }
  };
</script>

